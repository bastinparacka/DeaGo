<!DOCTYPE html>
<html>
<head>
<title>Facebook Login JavaScript Example</title>
<meta charset="UTF-8">
</head>
<body>
	<script>
	window.fbAsyncInit = function() {
		FB.init({
			appId      : '1516393198679725',
			xfbml      : true,
			version    : 'v2.5'
		});

		FB.getLoginStatus(function(response) {
			// Check login status on load, and if the user is
			// already logged in, go directly to the welcome message.
			if (response.status == 'connected') {
				console.log("logged in & authenticated")
				onLogin(response);
				uid = response.authResponse.userID;
				accessToken = response.authResponse.accessToken;
			}
			else if (response.status === 'not_authorized') {
				console.log("logged in but not authenticated !")
			}
			else {
				console.log("Not logged in !")
				// Otherwise, show Login dialog first.
				alert("Please allow the blocked popup/page redirect");
				$( "#fbtemp" ).click();
			}
		});


		function onLogin(response) {
			if (response.status == 'connected') {
				FB.api('/me?fields=first_name', function(data) {
					var welcomeBlock = document.getElementById('fb-welcome');
					welcomeBlock.innerHTML = 'Hello, ' + data.first_name +' '+'!';
				});
			}
		}



	};

	(function(d, s, id){
		var js, fjs = d.getElementsByTagName(s)[0];
		if (d.getElementById(id)) {return;}
		js = d.createElement(s); js.id = id;
//		js.src = "//connect.facebook.net/en_US/sdk.js";
		js.src = "sdk.js";
		fjs.parentNode.insertBefore(js, fjs);
	}(document, 'script', 'facebook-jssdk'));

	function fbLogin()
	{
		event.preventDefault();
		FB.login(function(response) {
			if (response.authResponse) {
				console.log('Welcome!  Fetching your information.... ');
			} else {
				console.log('User cancelled login or did not fully authorize.');
			}
		},{scope: 'user_friends, email, publish_actions'});
	}
	</script>
<!--
  Below we include the Login Button social plugin. This button uses
  the JavaScript SDK to present a graphical Login button that triggers
  the FB.login() function when clicked.
-->

<fb:login-button scope="public_profile,email,user_likes" onlogin="checkLoginState();">
</fb:login-button>

<div
  class="fb-like"
  data-share="true"
  data-width="450"
  data-show-faces="true">
</div>


<div id="status">
</div>

</body>
</html>
